{"version":3,"sources":["webpack:///route-home.chunk.785b8.js","webpack:///./components/home/style.less?5fa1","webpack:///./components/home/index.js","webpack:///./routes/home.js"],"names":["webpackJsonp","2HTC","module","exports","home","bgAnimation","home_box","home_title","home_error","home_video","home_image","fGKZ","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","home__classCallCheck","instance","Constructor","home__possibleConstructorReturn","home__inherits","defineProperty","preact_min","style","style_default","n","pong_loader","_ref4","home_Home","_Component","Home","this","apply","arguments","componentWillReceiveProps","_ref","_this2","imageSrc","setState","imageWidth","imageHeight","img","Image","onload","width","height","src","render","_ref2","_ref3","message","isLoading","connectionError","videoSrc","imgStyle","window","innerWidth","innerHeight","class","a","autoplay","loop","config","productive_abuser","routing_message_handlers","d","home_HomeRoute","HomeRoute","_this","state","componentWillMount","pa","connect","ev","onProductiveMessage","then","fetchChannels","channels","find","channel","tags","includes","catch","err","Error","toString","componentWillUnmount","disconnect","_this3","msg","text","toLowerCase","person","id","presenterPersonId","indexOf","channelId","fetchChannel","setTimeout","props"],"mappings":"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","file":"route-home.chunk.785b8.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ \"2HTC\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__2xyY2\",\"bgAnimation\":\"bgAnimation__jaRZy\",\"home_box\":\"home_box__itxXH\",\"home_title\":\"home_title__1toNY\",\"home_error\":\"home_error__2Qb9b\",\"home_video\":\"home_video__3LG8c\",\"home_image\":\"home_image__22pDL\"};\n\n/***/ }),\n\n/***/ \"fGKZ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ../node_modules/preact/dist/preact.min.js\nvar preact_min = __webpack_require__(\"KM04\");\nvar preact_min_default = /*#__PURE__*/__webpack_require__.n(preact_min);\n\n// EXTERNAL MODULE: ./components/home/style.less\nvar style = __webpack_require__(\"2HTC\");\nvar style_default = /*#__PURE__*/__webpack_require__.n(style);\n\n// EXTERNAL MODULE: ./components/pong-loader/index.js\nvar pong_loader = __webpack_require__(\"6whb\");\n\n// CONCATENATED MODULE: ./components/home/index.js\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar _ref4 = Object(preact_min[\"h\"])(pong_loader[\"a\" /* default */], null);\n\nvar home_Home = function (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    _classCallCheck(this, Home);\n\n    return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  Home.prototype.componentWillReceiveProps = function componentWillReceiveProps(_ref) {\n    var _this2 = this;\n\n    var imageSrc = _ref.imageSrc;\n\n    this.setState({ imageWidth: null, imageHeight: null });\n\n    if (!imageSrc) {\n      return;\n    }\n\n    var img = new Image();\n    img.onload = function () {\n      _this2.setState({ imageWidth: img.width, imageHeight: img.height });\n    };\n    img.src = imageSrc;\n  };\n\n  Home.prototype.render = function render(_ref2, _ref3) {\n    var message = _ref2.message,\n        isLoading = _ref2.isLoading,\n        connectionError = _ref2.connectionError,\n        videoSrc = _ref2.videoSrc,\n        imageSrc = _ref2.imageSrc;\n    var imageWidth = _ref3.imageWidth,\n        imageHeight = _ref3.imageHeight;\n\n    var imgStyle = '';\n\n    if (imageWidth && imageHeight) {\n      if (imageWidth / imageHeight > window.innerWidth / window.innerHeight) {\n        imgStyle = 'width: ' + (window.innerWidth - 100) + 'px';\n      } else {\n        imgStyle = 'width: ' + (window.innerHeight - 100) + 'px';\n      }\n    }\n\n    return Object(preact_min[\"h\"])(\n      'section',\n      { 'class': style_default.a.home },\n      Object(preact_min[\"h\"])(\n        'div',\n        { 'class': style_default.a.home_box },\n        isLoading && _ref4,\n        videoSrc && !isLoading && Object(preact_min[\"h\"])('video', { 'class': style_default.a.home_video, autoplay: true, loop: true, src: videoSrc }),\n        imageSrc && !isLoading && Object(preact_min[\"h\"])('img', { 'class': style_default.a.home_image, src: imageSrc, style: imgStyle }),\n        message && !videoSrc && !imageSrc && !isLoading && Object(preact_min[\"h\"])(\n          'div',\n          { 'class': style_default.a.home_title },\n          ' ',\n          message,\n          ' '\n        ),\n        connectionError && Object(preact_min[\"h\"])(\n          'div',\n          { 'class': style_default.a.home_error },\n          connectionError\n        )\n      )\n    );\n  };\n\n  return Home;\n}(preact_min[\"Component\"]);\n\n\n// EXTERNAL MODULE: ./lib/config.js\nvar config = __webpack_require__(\"5Iuc\");\n\n// EXTERNAL MODULE: ./lib/productive-abuser.js\nvar productive_abuser = __webpack_require__(\"+UHd\");\n\n// EXTERNAL MODULE: ./lib/routing-message-handlers.js\nvar routing_message_handlers = __webpack_require__(\"D9/9\");\n\n// CONCATENATED MODULE: /usr/local/lib/node_modules/preact-cli/node_modules/babel-loader/lib??ref--0!./routes/home.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return home_HomeRoute; });\n\n\nfunction home__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction home__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction home__inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar home_HomeRoute = function (_Component) {\n  home__inherits(HomeRoute, _Component);\n\n  function HomeRoute() {\n    home__classCallCheck(this, HomeRoute);\n\n    var _this = home__possibleConstructorReturn(this, _Component.call(this));\n\n    _this.state = {\n      message: 'Infinum Showoff 2017',\n      isLoading: true,\n      connectionError: null,\n      videoSrc: null,\n      imageSrc: null\n    };\n    return _this;\n  }\n\n  HomeRoute.prototype.componentWillMount = function componentWillMount() {\n    var _this2 = this;\n\n    this.pa = new productive_abuser[\"a\" /* default */](config[\"a\" /* default */]);\n    this.pa.connect(function (ev) {\n      return _this2.onProductiveMessage(ev);\n    }).then(function () {\n      return _this2.pa.fetchChannels();\n    }).then(function (channels) {\n      return channels.find(function (channel) {\n        return channel.tags.includes('productive-abuser');\n      });\n    }).then(function (channel) {\n      return _this2.channel = channel;\n    }).then(function () {\n      return _this2.setState({ isLoading: false, connectionError: null });\n    }).catch(function (err) {\n      if (err instanceof Error) {\n        throw err;\n      }\n      _this2.setState({ isLoading: false, connectionError: err.toString() });\n    });\n  };\n\n  HomeRoute.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.pa.disconnect();\n  };\n\n  HomeRoute.prototype.onProductiveMessage = function onProductiveMessage(ev) {\n    var _this3 = this;\n\n    Object(routing_message_handlers[\"a\" /* default */])(ev);\n    var msg = ev.text.toLowerCase();\n\n    if (ev.person.id === config[\"a\" /* default */].presenterPersonId && msg.indexOf('tanja') >= 0) {\n      this.setState({ message: null, videoSrc: null, imageSrc: '/assets/tanja.png' });\n    }\n\n    if (!this.channel || ev.channelId !== this.channel.id) {\n      this.pa.fetchChannel(ev.channelId).then(function (channel) {\n        if (channel.tags.includes('productive-abuser')) {\n          _this3.channel = channel;\n          _this3.setState({ message: 'Hi Ivan!', videoSrc: null, imageSrc: null });\n        }\n      });\n      return;\n    }\n\n    if (msg === 'let\\'s start') {\n      this.setState({ message: 'Oh really?', videoSrc: null, imageSrc: null });\n      // setTimeout(() => this.setState({message: 'Productive abuser'}), 5000);\n    } else if (msg === 'oh common') {\n      this.setState({ message: 'Nop!', videoSrc: null, imageSrc: null });\n      // setTimeout(() => this.setState({message: 'Productive abuser'}), 5000);\n    } else if (msg === 'pls start?') {\n      this.setState({ message: 'Okay, let\\'s go!', videoSrc: null, imageSrc: null });\n      setTimeout(function () {\n        return _this3.setState({ message: 'State of Producitve' });\n      }, 5000);\n    } else if (msg.indexOf('gdje je token?') >= 0) {\n      this.setState({ videoSrc: '/assets/gdje-je-token.mp4', message: null });\n    } else if (msg.indexOf('gdje je kod?') >= 0) {\n      this.setState({ imageSrc: '/assets/github.png', videoSrc: null, message: null });\n    } else if (msg === 'let\\'s abuse productive') {\n      this.setState({ message: 'Welcome to Productive Abuser', videoSrc: null, imageSrc: null });\n    } else if (msg.indexOf('music room') >= 0) {\n      this.setState({ imageSrc: '/assets/music-academy-extra.png', videoSrc: null, message: null });\n    }\n  };\n\n  HomeRoute.prototype.render = function render(props, _ref) {\n    var message = _ref.message,\n        isLoading = _ref.isLoading,\n        connectionError = _ref.connectionError,\n        videoSrc = _ref.videoSrc,\n        imageSrc = _ref.imageSrc;\n\n    return Object(preact_min[\"h\"])(home_Home, {\n      message: message,\n      isLoading: isLoading,\n      connectionError: connectionError,\n      videoSrc: videoSrc,\n      imageSrc: imageSrc\n    });\n  };\n\n  return HomeRoute;\n}(preact_min[\"Component\"]);\n\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-home.chunk.785b8.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__2xyY2\",\"bgAnimation\":\"bgAnimation__jaRZy\",\"home_box\":\"home_box__itxXH\",\"home_title\":\"home_title__1toNY\",\"home_error\":\"home_error__2Qb9b\",\"home_video\":\"home_video__3LG8c\",\"home_image\":\"home_image__22pDL\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/home/style.less\n// module id = 2HTC\n// module chunks = 3","import {h, Component} from 'preact';\nimport s from './style';\nimport PongLoader from '../pong-loader';\n\nexport default class Home extends Component {\n  componentWillReceiveProps({imageSrc}) {\n    this.setState({imageWidth: null, imageHeight: null});\n\n    if (!imageSrc) {\n      return;\n    }\n\n    const img = new Image();\n    img.onload = () => {\n      this.setState({imageWidth: img.width, imageHeight: img.height});\n    };\n    img.src = imageSrc;\n  }\n\n  render({message, isLoading, connectionError, videoSrc, imageSrc}, {imageWidth, imageHeight}) {\n    let imgStyle = '';\n\n    if (imageWidth && imageHeight) {\n      if ((imageWidth / imageHeight) > (window.innerWidth / window.innerHeight)) {\n        imgStyle = `width: ${window.innerWidth - 100}px`;\n      } else {\n        imgStyle = `width: ${window.innerHeight - 100}px`;\n      }\n    }\n\n    return (\n      <section class={s.home}>\n        <div class={s.home_box}>\n          {isLoading && (<PongLoader />)}\n\n          {videoSrc && !isLoading &&\n            (<video class={s.home_video} autoplay loop src={videoSrc} />)\n          }\n\n          {imageSrc && !isLoading &&\n            (<img class={s.home_image} src={imageSrc} style={imgStyle} />)\n          }\n\n          {message && !videoSrc && !imageSrc && !isLoading &&\n            (<div class={s.home_title}> {message} </div>)\n          }\n\n          {connectionError &&\n            <div class={s.home_error}>\n              {connectionError}\n            </div>\n          }\n        </div>\n      </section>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/home/index.js","import {h, Component} from 'preact';\nimport Home from '../components/home';\nimport config from '../lib/config';\nimport ProductiveAbuser from '../lib/productive-abuser';\nimport handleMessageForRouting from '../lib/routing-message-handlers';\n\nexport default class HomeRoute extends Component {\n  constructor() {\n    super();\n    this.state = {\n      message: 'Infinum Showoff 2017',\n      isLoading: true,\n      connectionError: null,\n      videoSrc: null,\n      imageSrc: null\n    };\n  }\n\n  componentWillMount() {\n    this.pa = new ProductiveAbuser(config);\n    this.pa.connect((ev) => this.onProductiveMessage(ev))\n      .then(() => this.pa.fetchChannels())\n      .then((channels) => channels.find((channel) => channel.tags.includes('productive-abuser')))\n      .then((channel) => (this.channel = channel))\n      .then(() => this.setState({isLoading: false, connectionError: null}))\n      .catch((err) => {\n        if (err instanceof Error) {\n          throw err;\n        }\n        this.setState({isLoading: false, connectionError: err.toString()});\n      });\n  }\n\n  componentWillUnmount() {\n    this.pa.disconnect();\n  }\n\n  onProductiveMessage(ev) {\n    handleMessageForRouting(ev);\n    const msg = ev.text.toLowerCase();\n\n    if (ev.person.id === config.presenterPersonId && msg.indexOf('tanja') >= 0) {\n      this.setState({message: null, videoSrc: null, imageSrc: '/assets/tanja.png'});\n    }\n\n    if (!this.channel || ev.channelId !== this.channel.id) {\n      this.pa.fetchChannel(ev.channelId).then((channel) => {\n        if (channel.tags.includes('productive-abuser')) {\n          this.channel = channel;\n          this.setState({message: 'Hi Ivan!', videoSrc: null, imageSrc: null});\n        }\n      });\n      return;\n    }\n\n    if (msg === 'let\\'s start') {\n      this.setState({message: 'Oh really?', videoSrc: null, imageSrc: null});\n      // setTimeout(() => this.setState({message: 'Productive abuser'}), 5000);\n    } else if (msg === 'oh common') {\n      this.setState({message: 'Nop!', videoSrc: null, imageSrc: null});\n      // setTimeout(() => this.setState({message: 'Productive abuser'}), 5000);\n    } else if (msg === 'pls start?') {\n      this.setState({message: 'Okay, let\\'s go!', videoSrc: null, imageSrc: null});\n      setTimeout(() => this.setState({message: 'State of Producitve'}), 5000);\n    } else if (msg.indexOf('gdje je token?') >= 0) {\n      this.setState({videoSrc: '/assets/gdje-je-token.mp4', message: null});\n    } else if (msg.indexOf('gdje je kod?') >= 0) {\n      this.setState({imageSrc: '/assets/github.png', videoSrc: null, message: null});\n    } else if (msg === 'let\\'s abuse productive') {\n      this.setState({message: 'Welcome to Productive Abuser', videoSrc: null, imageSrc: null});\n    } else if (msg.indexOf('music room') >= 0) {\n      this.setState({imageSrc: '/assets/music-academy-extra.png', videoSrc: null, message: null});\n    }\n  }\n\n  render(props, {message, isLoading, connectionError, videoSrc, imageSrc}) {\n    return (\n      <Home\n        message={message}\n        isLoading={isLoading}\n        connectionError={connectionError}\n        videoSrc={videoSrc}\n        imageSrc={imageSrc}\n      />\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/home.js"],"sourceRoot":""}