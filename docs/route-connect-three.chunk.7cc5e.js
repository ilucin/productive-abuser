webpackJsonp([4],{"2qR1":function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){function n(t){return r[0][0]===t&&r[0][1]===t&&r[0][2]===t||r[1][0]===t&&r[1][1]===t&&r[1][2]===t||r[2][0]===t&&r[2][1]===t&&r[2][2]===t||r[0][0]===t&&r[1][0]===t&&r[2][0]===t||r[0][1]===t&&r[1][1]===t&&r[2][1]===t||r[0][2]===t&&r[1][2]===t&&r[2][2]===t||r[0][0]===t&&r[1][1]===t&&r[2][2]===t||r[0][2]===t&&r[1][1]===t&&r[2][0]===t}var r=[[0,0,0],[0,0,0],[0,0,0]],o={0:" "};o[t]="X",o[e]="O";var c=t,i=void 0;return function(a,s,u){return 0!==r[u][s]||a!==c||i||(r[u][s]=a,c=a===t?e:t),i=n(t)?t:n(e)&&e,i?"Winner is "+i:r.reduce(function(t,e){return t||e.includes(0)},!1)?"-------\n"+r.map(function(t){return"|"+t.map(function(t){return o[t]}).join("|")+"|"}).join("\n")+"\n-------":"Nobody wins"}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n("KM04"),p=n("/QC5"),h=n("BmyT"),l=n.n(h),f=Object(u.h)("br",null),b=Object(u.h)("br",null),d=Object(u.h)("h1",null," Connect three "),y=function(t){function e(){return r(this,t.apply(this,arguments))}return o(e,t),e.prototype.render=function(t){var e=t.board,n=t.p1,r=t.p2;return Object(u.h)("div",{class:l.a.connectThree},n&&Object(u.h)("div",{class:l.a.connectThree_p1}," ",n," ",f," X "),r&&Object(u.h)("div",{class:l.a.connectThree_p2}," ",r," ",b," O "),e?Object(u.h)("div",{class:l.a.connectThree_board},Object(u.h)("pre",null,e)):d)},e}(u.Component),_=n("5Iuc"),O=n("+UHd"),v=n("D9/9");n.d(e,"default",function(){return j});var j=function(t){function e(){i(this,e);var n=a(this,t.call(this));return n.playFor={},n.state={board:null,isLoading:!0,connectionError:null},n}return s(e,t),e.prototype.componentWillMount=function(){var t=this;this.pa=new O.a(_.a),this.pa.connect(function(e){return t.onProductiveMessage(e)}).then(function(){return t.pa.fetchChannels()}).then(function(t){return t.find(function(t){return t.tags.includes("productive-abuser")})}).then(function(e){return t.channel=e}).then(function(){return t.setState({isLoading:!1,connectionError:null})}).catch(function(e){if(e instanceof Error)throw e;alert(e),t.setState({isLoading:!1,connectionError:e.toString()})})},e.prototype.componentWillUnmount=function(){this.pa.disconnect()},e.prototype.onProductiveMessage=function(t){if(Object(v.a)(t),!this.channel||t.channelId!==this.channel.id)return void this.pa.fetchChannel(t.channelId).then(function(t){t.tags.includes("snake")&&Object(p.b)("/snake")});var e=t.text.toLowerCase(),n=parseInt(e,10);if(e.indexOf("play")>=0&&e.indexOf("connect three with")>=0){var r=t.text.split("connect three with")[1].trim(),o=(t.person.firstName+" "+t.person.lastName).trim();o&&r&&(this.playFor[o]=c(o,r),this.playFor[r]=this.playFor[o],this.state.p1||this.state.p2||this.setState({p1:o,p2:r}))}else if(n>0&&n<10){var i=t.person.firstName+" "+t.person.lastName;if(!this.playFor[i])return;var a=this.playFor[i](i,(n-1)%3,Math.floor((n-1)/3));this.pa.postMessageToChannel(this.channel.id,"<pre>"+a+"</pre>"),i!==this.state.p1&&i!==this.state.p2||this.setState({board:a})}},e.prototype.render=function(t,e){var n=e.board,r=e.p1,o=e.p2;return Object(u.h)(y,{p1:r,p2:o,board:n})},e}(u.Component)},BmyT:function(t){t.exports={connectThree:"connectThree__6b6z7",connectThree_p1:"connectThree_p1__2DXbQ",connectThree_p2:"connectThree_p2__1II49",connectThree_board:"connectThree_board__1Rc0E"}}});
//# sourceMappingURL=route-connect-three.chunk.7cc5e.js.map